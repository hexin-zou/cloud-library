{"ast":null,"code":"import Cookies from 'js-cookie';\nimport request from \"@/utils/request\";\nimport * as echarts from 'echarts';\nconst option = {\n  title: {\n    text: '图书借还统计'\n  },\n  tooltip: {\n    trigger: 'axis'\n  },\n  legend: {\n    data: ['借书数量', '还书数量']\n  },\n  grid: {\n    left: '3%',\n    right: '4%',\n    bottom: '3%',\n    containLabel: true\n  },\n  toolbox: {\n    feature: {\n      saveAsImage: {}\n    }\n  },\n  xAxis: {\n    type: 'category',\n    boundaryGap: false,\n    data: [] // 从后台动态获取\n\n  },\n  yAxis: {\n    type: 'value'\n  },\n  series: [{\n    name: '借书数量',\n    type: 'line',\n    stack: 'Total',\n    smooth: true,\n    data: [] // 从后台动态获取\n\n  }, {\n    name: '还书数量',\n    type: 'line',\n    stack: 'Total',\n    smooth: true,\n    data: [] // 从后台动态获取\n\n  }]\n};\nexport default {\n  data() {\n    return {\n      admin: Cookies.get('admin') ? JSON.parse(Cookies.get('admin')) : {},\n      lineBox: null,\n      timeRange: 'week',\n      options: [{\n        label: '最近一周',\n        value: 'week'\n      }, {\n        label: '最近一个月',\n        value: 'month'\n      }, {\n        label: '最近两个月',\n        value: 'month2'\n      }, {\n        label: '最近三个月',\n        value: 'month3'\n      }]\n    };\n  },\n\n  mounted() {\n    // 等页面元素全部初始化好\n    this.load();\n  },\n\n  methods: {\n    load() {\n      if (!this.lineBox) {\n        this.lineBox = echarts.init(document.getElementById('line')); // 初始化echarts容器\n      } // 从后台获取数据\n\n\n      request.get('/br/borrow/lineCharts/' + this.timeRange).then(res => {\n        option.xAxis.data = res.data.date;\n        option.series[0].data = res.data.borrow;\n        option.series[1].data = res.data.retur;\n        this.lineBox.setOption(option); // 设置容器的属性值，当你的数据发生变化的时候，一定要重新setOption\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAmBA;AACA;AACA;AAEA;EACAA;IACAC;EADA,CADA;EAIAC;IACAC;EADA,CAJA;EAOAC;IACAC;EADA,CAPA;EAUAC;IACAC,UADA;IAEAC,WAFA;IAGAC,YAHA;IAIAC;EAJA,CAVA;EAgBAC;IACAC;MACAC;IADA;EADA,CAhBA;EAqBAC;IACAC,gBADA;IAEAC,kBAFA;IAGAX,QAHA,CAGA;;EAHA,CArBA;EA0BAY;IACAF;EADA,CA1BA;EA6BAG,SACA;IACAC,YADA;IAEAJ,YAFA;IAGAK,cAHA;IAIAC,YAJA;IAKAhB,QALA,CAKA;;EALA,CADA,EAQA;IACAc,YADA;IAEAJ,YAFA;IAGAK,cAHA;IAIAC,YAJA;IAKAhB,QALA,CAKA;;EALA,CARA;AA7BA;AA+CA;EACAA;IACA;MACAiB,mEADA;MAEAC,aAFA;MAGAC,iBAHA;MAIAC,UACA;QAAAC;QAAAC;MAAA,CADA,EAEA;QAAAD;QAAAC;MAAA,CAFA,EAGA;QAAAD;QAAAC;MAAA,CAHA,EAIA;QAAAD;QAAAC;MAAA,CAJA;IAJA;EAWA,CAbA;;EAcAC;IAAA;IACA;EACA,CAhBA;;EAiBAC;IACAC;MACA;QACA,6DADA,CACA;MACA,CAHA,CAIA;;;MACAC;QACAC;QACAA;QACAA;QACA,+BAJA,CAIA;MACA,CALA;IAMA;;EAZA;AAjBA","names":["title","text","tooltip","trigger","legend","data","grid","left","right","bottom","containLabel","toolbox","feature","saveAsImage","xAxis","type","boundaryGap","yAxis","series","name","stack","smooth","admin","lineBox","timeRange","options","label","value","mounted","methods","load","request","option"],"sourceRoot":"src/views/home","sources":["HomeView.vue"],"sourcesContent":["<template>\n  <div>\n    <div style=\"margin: 20px 0\">\n      <el-select class=\"input\" v-model=\"timeRange\" placeholder=\"请选择\" @change=\"load\">  <!--  从后台加载最新的数据 -->\n        <el-option\n            v-for=\"item in options\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\">\n        </el-option>\n      </el-select>\n    </div>\n    <el-card>\n      <div id=\"line\" style=\"width: 100%; height: 400px\"></div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport Cookies from 'js-cookie'\nimport request from \"@/utils/request\";\nimport * as echarts from 'echarts'\n\nconst option = {\n  title: {\n    text: '图书借还统计'\n  },\n  tooltip: {\n    trigger: 'axis'\n  },\n  legend: {\n    data: ['借书数量', '还书数量']\n  },\n  grid: {\n    left: '3%',\n    right: '4%',\n    bottom: '3%',\n    containLabel: true\n  },\n  toolbox: {\n    feature: {\n      saveAsImage: {}\n    }\n  },\n  xAxis: {\n    type: 'category',\n    boundaryGap: false,\n    data: []  // 从后台动态获取\n  },\n  yAxis: {\n    type: 'value'\n  },\n  series: [\n    {\n      name: '借书数量',\n      type: 'line',\n      stack: 'Total',\n      smooth: true,\n      data: []     // 从后台动态获取\n    },\n    {\n      name: '还书数量',\n      type: 'line',\n      stack: 'Total',\n      smooth: true,\n      data: []     // 从后台动态获取\n    }\n  ]\n}\n\n  export default {\n    data() {\n      return {\n        admin: Cookies.get('admin') ? JSON.parse(Cookies.get('admin')) : {},\n        lineBox: null,\n        timeRange: 'week',\n        options: [\n          {label: '最近一周', value: 'week'},\n          {label: '最近一个月', value: 'month'},\n          {label: '最近两个月', value: 'month2'},\n          {label: '最近三个月', value: 'month3'},\n        ]\n      }\n    },\n    mounted() {  // 等页面元素全部初始化好\n      this.load()\n    },\n    methods: {\n      load() {\n        if (!this.lineBox) {\n          this.lineBox = echarts.init(document.getElementById('line'))  // 初始化echarts容器\n        }\n        // 从后台获取数据\n        request.get('/br/borrow/lineCharts/' + this.timeRange).then(res => {\n          option.xAxis.data = res.data.date\n          option.series[0].data = res.data.borrow\n          option.series[1].data = res.data.retur\n          this.lineBox.setOption(option)  // 设置容器的属性值，当你的数据发生变化的时候，一定要重新setOption\n        })\n      }\n    }\n  }\n</script>\n\n<style>\n.input {\n  width: 300px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}